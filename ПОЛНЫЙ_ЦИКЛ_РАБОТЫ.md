# –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã –ø–µ—á–∞—Ç–∏ —è—á–µ–µ–∫ –ü–í–ó

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

–°–∏—Å—Ç–µ–º–∞ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –¥–≤—É—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:
1. **–°–µ—Ä–≤–µ—Ä –ø–µ—á–∞—Ç–∏** (Python Flask) - –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ –ø–µ—á–∞—Ç—å –∏ —É–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–∏–Ω—Ç–µ—Ä–æ–º
2. **–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –±—Ä–∞—É–∑–µ—Ä–∞** (Chrome/Edge/–Ø–Ω–¥–µ–∫—Å.–ë—Ä–∞—É–∑–µ—Ä) - –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –Ω–æ–º–µ—Ä–∞ —è—á–µ–µ–∫ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∏—Ö –Ω–∞ –ø–µ—á–∞—Ç—å

---

## üìã –ü–û–õ–ù–´–ô –¶–ò–ö–õ –†–ê–ë–û–¢–´

### –®–ê–ì 1: –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã

#### 1.1. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø—É—Å–∫–∞–µ—Ç: –ó–ê–ü–£–°–¢–ò–¢–¨.bat (Windows) –∏–ª–∏ –ó–ê–ü–£–°–¢–ò–¢–¨.sh (Mac/Linux)
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏–∑ `config.json` (—Ç–∏–ø –ø—Ä–∏–Ω—Ç–µ—Ä–∞, –ø–æ—Ä—Ç, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏)
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏—Å—Ç–æ—Ä–∏—è –ø–µ—á–∞—Ç–∏ –∏–∑ `print_history.json`
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏–Ω—Ç–µ—Ä (–µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—Ç)
- –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è Flask —Å–µ—Ä–≤–µ—Ä –Ω–∞ –ø–æ—Ä—Ç—É 5001
- –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Ñ–æ–Ω–æ–≤—ã–π –ø–æ—Ç–æ–∫ `print_worker` –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—á–µ—Ä–µ–¥–∏ –ø–µ—á–∞—Ç–∏
- –°–æ–∑–¥–∞–µ—Ç—Å—è –æ—á–µ—Ä–µ–¥—å `print_queue` –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á –ø–µ—á–∞—Ç–∏

**–õ–æ–≥–∏:**
```
–ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏...
–ó–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏...
–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–Ω—Ç–µ—Ä–∞...
–ó–∞–ø—É—â–µ–Ω –ø—Ä–æ—Ü–µ—Å—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—á–µ—Ä–µ–¥–∏ –ø–µ—á–∞—Ç–∏
–ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ http://localhost:5001
```

#### 1.2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –±—Ä–∞—É–∑–µ—Ä–∞
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç `chrome://extensions/` (–∏–ª–∏ `browser://extensions/` –¥–ª—è –Ø–Ω–¥–µ–∫—Å.–ë—Ä–∞—É–∑–µ—Ä–∞)
- –í–∫–ª—é—á–∞–µ—Ç "–†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞"
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç –ø–∞–ø–∫—É `extension/` –∫–∞–∫ —Ä–∞—Å–ø–∞–∫–æ–≤–∞–Ω–Ω–æ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ `chrome.storage`:
  - `printEnabled: true`
  - `serverUrl: 'http://localhost:5001'`
- –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –Ω–∞—á–∏–Ω–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö —Å–∞–π—Ç–∞—Ö (ozon.ru, wildberries.ru)

---

### –®–ê–ì 2: –†–∞–±–æ—Ç–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ Ozon/Wildberries

#### 2.1. –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
–ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø—Ä–∏–µ–º–∫–∏ –Ω–∞ Ozon –∏–ª–∏ Wildberries:

**Content Script (`content.js`) –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è** –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –±–ª–∞–≥–æ–¥–∞—Ä—è `manifest.json`:
```json
"content_scripts": [{
  "matches": ["https://*.ozon.ru/*", "https://*.wildberries.ru/*"],
  "js": ["content.js"],
  "run_at": "document_idle"
}]
```

#### 2.2. –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –Ω–æ–º–µ—Ä–æ–≤ —è—á–µ–µ–∫ –ø–æ—Å–ª–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

**–í–ê–ñ–ù–û:** –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ —Å–∏—Å—Ç–µ–º–∞ Ozon –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≤ DOM –ø–æ—Å–ª–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —à—Ç—Ä–∏—Ö-–∫–æ–¥–∞ —Å–∫–∞–Ω–µ—Ä–æ–º. –†–∞–±–æ—Ç–∞–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ - –ø–æ—Å–ª–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–∞ —è—á–µ–π–∫–∞ —Å—Ä–∞–∑—É –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ –ø–µ—á–∞—Ç—å.

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏:**

1. –ú–µ–Ω–µ–¥–∂–µ—Ä —Å–∫–∞–Ω–∏—Ä—É–µ—Ç —à—Ç—Ä–∏—Ö-–∫–æ–¥ —Ç–æ–≤–∞—Ä–∞ —Å–∫–∞–Ω–µ—Ä–æ–º
2. –°–∫–∞–Ω–µ—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ —Å–∏—Å—Ç–µ–º—É Ozon
3. –°–∏—Å—Ç–µ–º–∞ Ozon –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏ **–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –Ω–æ–º–µ—Ä —è—á–µ–π–∫–∏ –≤ DOM** —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, "122-1", "122-2", "122-3" –¥–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ç–æ–≤–∞—Ä–æ–≤ –æ—Ç –æ–¥–Ω–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞)
4. –ù–∞—à–∞ —Å–∏—Å—Ç–µ–º–∞ **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç —ç—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è** –∏ —Å—Ä–∞–∑—É –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–æ–º–µ—Ä —è—á–µ–π–∫–∏ –Ω–∞ –ø–µ—á–∞—Ç—å

**–ú–µ—Ö–∞–Ω–∏–∑–º –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è:**

Content Script –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–µ—Ç–æ–¥–æ–≤ –¥–ª—è –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞ –Ω–æ–º–µ—Ä–æ–≤ —è—á–µ–µ–∫:

1. **MutationObserver** - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è DOM –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏:
   ```javascript
   observer.observe(document.body, {
     childList: true,      // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
     subtree: true,        // –í–æ –≤—Å–µ—Ö –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–∞—Ö
     characterData: true,  // –ò–∑–º–µ–Ω–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞
     attributes: true      // –ò–∑–º–µ–Ω–µ–Ω–∏—è –∞—Ç—Ä–∏–±—É—Ç–æ–≤ (value, data-*)
   });
   ```

2. **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–π –ø–æ–∏—Å–∫ –≤ –Ω–µ–¥–∞–≤–Ω–æ –∏–∑–º–µ–Ω–µ–Ω–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–∞—Ö:**
   - –ü—Ä–∏ –∫–∞–∂–¥–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏ DOM —Å–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –Ω–µ–¥–∞–≤–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ/–∏–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
   - –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –±—ã—Å—Ç—Ä–æ –Ω–∞—Ö–æ–¥–∏—Ç—å –Ω–æ–º–µ—Ä–∞ —è—á–µ–µ–∫ —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

3. **–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π input:**
   - –ü–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ input –ø–æ–ª—è—Ö (—á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø—Ä–∏ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏)
   - –°—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –ø—Ä–∏ –≤–≤–æ–¥–µ –¥–∞–Ω–Ω—ã—Ö

4. **–ü–æ–ª–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ DOM:**
   - –†–µ–∑–µ—Ä–≤–Ω—ã–π –º–µ—Ç–æ–¥ –¥–ª—è –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –º–µ—Å—Ç–∞ –ø–æ—è–≤–ª–µ–Ω–∏—è –Ω–æ–º–µ—Ä–∞ —è—á–µ–π–∫–∏

**–ê–ª–≥–æ—Ä–∏—Ç–º –ø–æ–∏—Å–∫–∞:**

1. **–ü–æ–∏—Å–∫ –ø–æ DOM-—Å–µ–ª–µ–∫—Ç–æ—Ä–∞–º:**
   - –ò—â–µ—Ç —ç–ª–µ–º–µ–Ω—Ç—ã —Å –∫–ª–∞—Å—Å–∞–º–∏, —Å–æ–¥–µ—Ä–∂–∞—â–∏–º–∏ "cell", "—è—á–µ–π–∫", "Cell"
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∞—Ç—Ä–∏–±—É—Ç—ã `data-cell`, `data-cell-number`, `data-cell-id`
   - –°–∫–∞–Ω–∏—Ä—É–µ—Ç input –ø–æ–ª—è, textarea, —ç–ª–µ–º–µ–Ω—Ç—ã —Å value
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —ç–ª–µ–º–µ–Ω—Ç—ã —Å –∫—Ä—É–ø–Ω—ã–º —à—Ä–∏—Ñ—Ç–æ–º (>= 20px) - —á–∞—Å—Ç–æ –Ω–æ–º–µ—Ä–∞ —è—á–µ–µ–∫ –≤—ã–¥–µ–ª—è—é—Ç—Å—è –∫—Ä—É–ø–Ω–æ

2. **–ü–æ–∏—Å–∫ –ø–æ —Ä–µ–≥—É–ª—è—Ä–Ω—ã–º –≤—ã—Ä–∞–∂–µ–Ω–∏—è–º:**
   
   –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã:
   - `122` (–æ–¥–∏–Ω —Ç–æ–≤–∞—Ä - –ø—Ä–æ—Å—Ç–æ–µ —á–∏—Å–ª–æ)
   - `122-1`, `122-2`, `122-3` (–Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–æ–≤–∞—Ä–æ–≤ - –Ω–æ–º–µ—Ä —è—á–µ–π–∫–∏ —Å —Å—É—Ñ—Ñ–∏–∫—Å–æ–º –ø–æ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—é)
   - `65-1`, `529-13` (—Ü–∏—Ñ—Ä–∞-—Ü–∏—Ñ—Ä–∞)
   - `A1-1`, `B2-3` (–±—É–∫–≤–∞-—Ü–∏—Ñ—Ä–∞-—Ü–∏—Ñ—Ä–∞)
   - `AA1-1`, `AB2-3` (–¥–≤—É—Ö–±—É–∫–≤–µ–Ω–Ω—ã–µ)
   - `A1.1`, `B2.3` (—Å —Ç–æ—á–∫–æ–π)
   - `A1_1`, `B2_3` (—Å –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏–µ–º)
   - `A1/1`, `B2/3` (—Å–æ —Å–ª—ç—à–µ–º)
   - `A11`, `B23` (–±–µ–∑ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è, –º–∏–Ω–∏–º—É–º 2 —Ü–∏—Ñ—Ä—ã)

3. **–í–∞–ª–∏–¥–∞—Ü–∏—è:**
   - –ò—Å–∫–ª—é—á–∞–µ—Ç –¥–∞—Ç—ã (2024-12-17)
   - –ò—Å–∫–ª—é—á–∞–µ—Ç IP-–∞–¥—Ä–µ—Å–∞ (192.168.1.1)
   - –ò—Å–∫–ª—é—á–∞–µ—Ç –≤—Ä–µ–º—è (12:30)
   - –ò—Å–∫–ª—é—á–∞–µ—Ç –¥–ª–∏–Ω–Ω—ã–µ —á–∏—Å–ª–∞ (ID –∑–∞–∫–∞–∑–æ–≤, —Ç–µ–ª–µ—Ñ–æ–Ω—ã)
   - –ü—Ä–æ—Å—Ç—ã–µ —á–∏—Å–ª–∞ (122) –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–∞–π–¥–µ–Ω—ã, –µ—Å–ª–∏ –≤—Å—Ç—Ä–µ—á–∞—é—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ —Å–ª–æ–≤–∞ "—è—á–µ–π–∫–∞"
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –Ω–æ–º–µ—Ä —è—á–µ–π–∫–∏ –Ω–µ –±—ã–ª –Ω–∞–ø–µ—á–∞—Ç–∞–Ω —Ä–∞–Ω–µ–µ (—Ö—Ä–∞–Ω–∏—Ç –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `lastPrintedCell`)

#### 2.3. –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ –ø–µ—á–∞—Ç—å

–ö–æ–≥–¥–∞ –æ–±–Ω–∞—Ä—É–∂–µ–Ω –Ω–æ–≤—ã–π –Ω–æ–º–µ—Ä —è—á–µ–π–∫–∏:

```javascript
async function sendToPrint(cellNumber) {
  // –ü–æ–ª—É—á–∞–µ–º URL —Å–µ—Ä–≤–µ—Ä–∞ –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫
  const serverUrl = (await chrome.storage.sync.get('serverUrl')).serverUrl || 'http://localhost:5001';
  
  // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º POST –∑–∞–ø—Ä–æ—Å
  const response = await fetch(`${serverUrl}/print`, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ cellNumber: cellNumber })
  });
  
  // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
  if (response.ok) {
    showNotification('‚úì –ü–µ—á–∞—Ç—å: ' + cellNumber, 'success');
  }
}
```

---

### –®–ê–ì 3: –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

#### 3.1. –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞

**Endpoint:** `POST /print`

**–ö–æ–¥ —Å–µ—Ä–≤–µ—Ä–∞:**
```python
@app.route('/print', methods=['POST'])
def print_endpoint():
    data = request.get_json()
    cell_number = data.get('cellNumber')
    
    try:
        # –ü—ã—Ç–∞–µ–º—Å—è —Å—Ä–∞–∑—É –Ω–∞–ø–µ—á–∞—Ç–∞—Ç—å
        with print_lock:
            print_cell_label(cell_number)
        return jsonify({
            'success': True,
            'message': f'–Ø—á–µ–π–∫–∞ {cell_number} –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –Ω–∞ –ø–µ—á–∞—Ç—å'
        })
    except Exception as e:
        # –ï—Å–ª–∏ –Ω–µ –ø–æ–ª—É—á–∏–ª–æ—Å—å, –¥–æ–±–∞–≤–ª—è–µ–º –≤ –æ—á–µ—Ä–µ–¥—å
        print_queue.put({
            'cell_number': cell_number, 
            'retry_count': 0, 
            'max_retries': 3
        })
        return jsonify({
            'success': True,
            'message': f'–Ø—á–µ–π–∫–∞ {cell_number} –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ –æ—á–µ—Ä–µ–¥—å –ø–µ—á–∞—Ç–∏'
        })
```

#### 3.2. –ü–µ—á–∞—Ç—å —ç—Ç–∏–∫–µ—Ç–∫–∏

**–§—É–Ω–∫—Ü–∏—è `print_cell_label(cell_number)`:**
1. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –ª–∏ –ø—Ä–∏–Ω—Ç–µ—Ä
2. –ï—Å–ª–∏ –Ω–µ—Ç - –ø—ã—Ç–∞–µ—Ç—Å—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å (—á–∏—Ç–∞–µ—Ç `config.json`)
3. –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –ø—Ä–∏–Ω—Ç–µ—Ä (—Ä–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞, –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ, –∂–∏—Ä–Ω–æ—Å—Ç—å)
4. –ü–µ—á–∞—Ç–∞–µ—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫ "–Ø–ß–ï–ô–ö–ê" (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω)
5. –ü–µ—á–∞—Ç–∞–µ—Ç –Ω–æ–º–µ—Ä —è—á–µ–π–∫–∏ –∫—Ä—É–ø–Ω—ã–º —à—Ä–∏—Ñ—Ç–æ–º
6. –ü–µ—á–∞—Ç–∞–µ—Ç QR-–∫–æ–¥ —Å –Ω–æ–º–µ—Ä–æ–º —è—á–µ–π–∫–∏ (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω)
7. –û—Ç—Ä–µ–∑–∞–µ—Ç —ç—Ç–∏–∫–µ—Ç–∫—É (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ)
8. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ –∏—Å—Ç–æ—Ä–∏—é –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É

**–ü—Ä–æ—Ç–æ–∫–æ–ª –ø–µ—á–∞—Ç–∏:** ESC/POS –∫–æ–º–∞–Ω–¥—ã —á–µ—Ä–µ–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫—É `python-escpos`

#### 3.3. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

–ï—Å–ª–∏ –ø—Ä–∏–Ω—Ç–µ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –∏–ª–∏ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞:
- –ó–∞–¥–∞—á–∞ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ –æ—á–µ—Ä–µ–¥—å `print_queue`
- –§–æ–Ω–æ–≤—ã–π –ø–æ—Ç–æ–∫ `print_worker` –±—É–¥–µ—Ç –ø—ã—Ç–∞—Ç—å—Å—è –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –ø–µ—á–∞—Ç—å –¥–æ 3 —Ä–∞–∑
- –û—à–∏–±–∫–∞ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è –≤ —Ñ–∞–π–ª `logs/print_server_YYYYMMDD.log`
- –ó–∞–ø–∏—Å—å –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ –∏—Å—Ç–æ—Ä–∏—é —Å –ø–æ–º–µ—Ç–∫–æ–π –æ–± –æ—à–∏–±–∫–µ

---

### –®–ê–ì 4: –§–æ–Ω–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—á–µ—Ä–µ–¥–∏

**–§—É–Ω–∫—Ü–∏—è `print_worker()`** —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ç–æ–∫–µ:

```python
def print_worker():
    while print_worker_running:
        try:
            # –ü–æ–ª—É—á–∞–µ–º –∑–∞–¥–∞—á—É –∏–∑ –æ—á–µ—Ä–µ–¥–∏
            task = print_queue.get(timeout=1)
            cell_number = task['cell_number']
            retry_count = task.get('retry_count', 0)
            
            # –ü—ã—Ç–∞–µ–º—Å—è –Ω–∞–ø–µ—á–∞—Ç–∞—Ç—å
            with print_lock:
                print_cell_label(cell_number, retry_count=retry_count, max_retries=3)
            
            print_queue.task_done()
        except queue.Empty:
            continue
        except Exception as e:
            # –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ - –¥–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞—Ç–Ω–æ –≤ –æ—á–µ—Ä–µ–¥—å (–µ—Å–ª–∏ –Ω–µ –ø—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç)
            if retry_count < 3:
                print_queue.put({...})
```

**–õ–æ–≥–∏–∫–∞ –ø–æ–≤—Ç–æ—Ä–æ–≤:**
- –ú–∞–∫—Å–∏–º—É–º 3 –ø–æ–ø—ã—Ç–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–π —è—á–µ–π–∫–∏
- –ú–µ–∂–¥—É –ø–æ–ø—ã—Ç–∫–∞–º–∏ –º–æ–∂–µ—Ç –ø—Ä–æ–π—Ç–∏ –≤—Ä–µ–º—è (–ø—Ä–∏–Ω—Ç–µ—Ä –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω)
- –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –ø–µ—á–∞—Ç–∏ –∑–∞–¥–∞—á–∞ —É–¥–∞–ª—è–µ—Ç—Å—è –∏–∑ –æ—á–µ—Ä–µ–¥–∏

---

### –®–ê–ì 5: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

#### 5.1. –ò—Å—Ç–æ—Ä–∏—è –ø–µ—á–∞—Ç–∏

–ö–∞–∂–¥–∞—è –ø–µ—á–∞—Ç—å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `print_history.json`:

```json
[
  {
    "timestamp": "2024-12-21T22:10:30.123456",
    "cell_number": "A1-1",
    "success": true,
    "error": null
  },
  {
    "timestamp": "2024-12-21T22:10:35.789012",
    "cell_number": "B2-3",
    "success": false,
    "error": "–ü—Ä–∏–Ω—Ç–µ—Ä –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω"
  }
]
```

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ:** –•—Ä–∞–Ω–∏—Ç—Å—è –º–∞–∫—Å–∏–º—É–º 1000 –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∑–∞–ø–∏—Å–µ–π

#### 5.2. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

–û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏ (–ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `STATISTICS`):

```python
STATISTICS = {
    'total_printed': 150,          # –í—Å–µ–≥–æ –ø–æ–ø—ã—Ç–æ–∫ –ø–µ—á–∞—Ç–∏
    'successful_prints': 145,      # –£—Å–ø–µ—à–Ω—ã—Ö
    'failed_prints': 5,            # –û—à–∏–±–æ–∫
    'prints_by_day': {             # –ü–æ –¥–Ω—è–º
        '2024-12-21': 50,
        '2024-12-20': 95
    },
    'last_print_time': '2024-12-21T22:10:30.123456'
}
```

#### 5.3. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ —Å–æ–±—ã—Ç–∏—è –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ —Ñ–∞–π–ª—ã:
- `logs/print_server_20241221.log` - –ª–æ–≥ –∑–∞ —Ç–µ–∫—É—â–∏–π –¥–µ–Ω—å
- –§–æ—Ä–º–∞—Ç: `2024-12-21 22:10:30,123 - __main__ - INFO - –Ø—á–µ–π–∫–∞ A1-1 —É—Å–ø–µ—à–Ω–æ –Ω–∞–ø–µ—á–∞—Ç–∞–Ω–∞`

---

### –®–ê–ì 6: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

#### 6.1. Popup —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è

–ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∫–ª–∏–∫–∞–µ—Ç –Ω–∞ –∏–∫–æ–Ω–∫—É —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è:

1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä–≤–µ—Ä–∞:**
   ```javascript
   // –ó–∞–ø—Ä–æ—Å—ã –∫ —Å–µ—Ä–≤–µ—Ä—É
   fetch('http://localhost:5001/status')
   fetch('http://localhost:5001/statistics')
   ```

2. **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏:**
   - –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞ (–æ–Ω–ª–∞–π–Ω/–æ—Ñ–ª–∞–π–Ω)
   - –°—Ç–∞—Ç—É—Å –ø—Ä–∏–Ω—Ç–µ—Ä–∞ (OK/ERROR)
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞–ø–µ—á–∞—Ç–∞–Ω–Ω—ã—Ö —Å–µ–≥–æ–¥–Ω—è
   - –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞–ø–µ—á–∞—Ç–∞–Ω–Ω—ã—Ö
   - –†–∞–∑–º–µ—Ä –æ—á–µ—Ä–µ–¥–∏ –ø–µ—á–∞—Ç–∏

3. **–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:**
   - –¢–µ—Å—Ç–æ–≤–∞—è –ø–µ—á–∞—Ç—å (–≤–≤–æ–¥ –Ω–æ–º–µ—Ä–∞ —è—á–µ–π–∫–∏ –≤—Ä—É—á–Ω—É—é)
   - –û—Ç–∫—Ä—ã—Ç–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø—Ä–∏–Ω—Ç–µ—Ä–∞ (`/settings`)
   - –û—Ç–∫—Ä—ã—Ç–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –ø–µ—á–∞—Ç–∏ (`/history/page`)
   - –û—Ç–∫—Ä—ã—Ç–∏–µ –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (`/`)

#### 6.2. –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å–µ—Ä–≤–µ—Ä–∞

**–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞** (`http://localhost:5001/`):
- –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞ –∏ –ø—Ä–∏–Ω—Ç–µ—Ä–∞
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–≤—Å–µ–≥–æ, —É—Å–ø–µ—à–Ω—ã—Ö, –æ—à–∏–±–æ–∫)
- –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö API endpoints
- –°—Å—ã–ª–∫–∏ –Ω–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –∏—Å—Ç–æ—Ä–∏—é

**–°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫** (`http://localhost:5001/settings`):
- –§–æ—Ä–º–∞ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç–∏–ø–∞ –ø—Ä–∏–Ω—Ç–µ—Ä–∞
- –í—ã–±–æ—Ä COM-–ø–æ—Ä—Ç–∞ –∏–∑ —Å–ø–∏—Å–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –ø–µ—á–∞—Ç–∏ (—Ä–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞, QR-–∫–æ–¥, –æ—Ç—Ä–µ–∑–∞–Ω–∏–µ)
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ `config.json` —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø–µ—Ä–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π –ø—Ä–∏–Ω—Ç–µ—Ä–∞

**–°—Ç—Ä–∞–Ω–∏—Ü–∞ –∏—Å—Ç–æ—Ä–∏–∏** (`http://localhost:5001/history/page`):
- –¢–∞–±–ª–∏—Ü–∞ –≤—Å–µ—Ö –Ω–∞–ø–µ—á–∞—Ç–∞–Ω–Ω—ã—Ö —è—á–µ–µ–∫
- –í—Ä–µ–º—è –ø–µ—á–∞—Ç–∏, —Å—Ç–∞—Ç—É—Å (—É—Å–ø–µ—à–Ω–æ/–æ—à–∏–±–∫–∞), —Ç–µ–∫—Å—Ç –æ—à–∏–±–∫–∏
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –∑–∞–ø–∏—Å–µ–π

---

## üîÑ –ü–û–õ–ù–´–ô –ü–†–û–¶–ï–°–° –í –ü–†–ò–ú–ï–†–ï

### –ü—Ä–∏–º–µ—Ä: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–µ—á–∞—Ç—å —è—á–µ–µ–∫ –ø–æ—Å–ª–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ Ozon

**–§–æ—Ä–º–∞—Ç –Ω–æ–º–µ—Ä–æ–≤ —è—á–µ–µ–∫:**
- **–û–¥–∏–Ω —Ç–æ–≤–∞—Ä:** –ø—Ä–æ—Å—Ç–æ —á–∏—Å–ª–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä `122`
- **–î–≤–∞ —Ç–æ–≤–∞—Ä–∞:** `122-1` –∏ `122-2`
- **–¢—Ä–∏ —Ç–æ–≤–∞—Ä–∞:** `122-1`, `122-2`, `122-3`
- –ò —Ç–∞–∫ –¥–∞–ª–µ–µ –ø–æ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—é —Å—É—Ñ—Ñ–∏–∫—Å–∞

**–°—Ü–µ–Ω–∞—Ä–∏–π 1: –û–¥–∏–Ω —Ç–æ–≤–∞—Ä**

1. **–ú–µ–Ω–µ–¥–∂–µ—Ä —Å–∫–∞–Ω–∏—Ä—É–µ—Ç —à—Ç—Ä–∏—Ö-–∫–æ–¥ —Ç–æ–≤–∞—Ä–∞**
   - –°–∫–∞–Ω–µ—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ —Å–∏—Å—Ç–µ–º—É Ozon
   - –°–∏—Å—Ç–µ–º–∞ Ozon –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏ **–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –Ω–æ–º–µ—Ä —è—á–µ–π–∫–∏ "122" –≤ DOM** —Å—Ç—Ä–∞–Ω–∏—Ü—ã
   - –ù–æ–º–µ—Ä –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ DOM (input –ø–æ–ª–µ, —Ç–µ–∫—Å—Ç–æ–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç, –∞—Ç—Ä–∏–±—É—Ç data-cell –∏ —Ç.–¥.)

2. **–ù–∞—à–∞ —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è**
   - **MutationObserver** —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–µ DOM (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ/–∏–∑–º–µ–Ω–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞)
   - **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–π –ø–æ–∏—Å–∫** –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–µ–¥–∞–≤–Ω–æ –∏–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –ø–µ—Ä–≤—ã–º–∏
   - –ù–∞—Ö–æ–¥–∏—Ç –Ω–æ–º–µ—Ä "122" –∏ **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ –ø–µ—á–∞—Ç—å**

**–°—Ü–µ–Ω–∞—Ä–∏–π 2: –ù–µ—Å–∫–æ–ª—å–∫–æ —Ç–æ–≤–∞—Ä–æ–≤ –æ—Ç –æ–¥–Ω–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞**

1. **–ú–µ–Ω–µ–¥–∂–µ—Ä —Å–∫–∞–Ω–∏—Ä—É–µ—Ç –ø–µ—Ä–≤—ã–π —Ç–æ–≤–∞—Ä** ‚Üí —Å–∏—Å—Ç–µ–º–∞ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç "122-1" –≤ DOM ‚Üí **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–µ—á–∞—Ç—å "122-1"**
2. **–ú–µ–Ω–µ–¥–∂–µ—Ä —Å–∫–∞–Ω–∏—Ä—É–µ—Ç –≤—Ç–æ—Ä–æ–π —Ç–æ–≤–∞—Ä** ‚Üí —Å–∏—Å—Ç–µ–º–∞ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç "122-2" –≤ DOM ‚Üí **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–µ—á–∞—Ç—å "122-2"**
3. **–ú–µ–Ω–µ–¥–∂–µ—Ä —Å–∫–∞–Ω–∏—Ä—É–µ—Ç —Ç—Ä–µ—Ç–∏–π —Ç–æ–≤–∞—Ä** ‚Üí —Å–∏—Å—Ç–µ–º–∞ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç "122-3" –≤ DOM ‚Üí **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–µ—á–∞—Ç—å "122-3"**

–ö–∞–∂–¥—ã–π –Ω–æ–º–µ—Ä —è—á–µ–π–∫–∏ –ø–µ—á–∞—Ç–∞–µ—Ç—Å—è **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è** —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–≥–æ —Ç–æ–≤–∞—Ä–∞. –°—É—Ñ—Ñ–∏–∫—Å—ã –ø—Ä–∏—Å–≤–∞–∏–≤–∞—é—Ç—Å—è —Å–∏—Å—Ç–µ–º–æ–π Ozon –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—é –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–æ–≤–∞—Ä–æ–≤ –æ—Ç –æ–¥–Ω–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞.

**–†–µ–∑–µ—Ä–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è (–µ—Å–ª–∏ MutationObserver –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª):**
   - –°–æ–±—ã—Ç–∏–µ `input` –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–µ –≤ input –ø–æ–ª–µ
   - –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (–∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã) –Ω–∞—Ö–æ–¥–∏—Ç –Ω–æ–º–µ—Ä –≤ DOM

3. **–ó–∞–ø—Ä–æ—Å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä**
   ```
   POST http://localhost:5001/print
   Body: {"cellNumber": "A1-1"}
   ```

4. **–°–µ—Ä–≤–µ—Ä –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å**
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏–Ω—Ç–µ—Ä–∞
   - –§–æ—Ä–º–∏—Ä—É–µ—Ç –∫–æ–º–∞–Ω–¥—ã ESC/POS –¥–ª—è –ø–µ—á–∞—Ç–∏
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ –ø—Ä–∏–Ω—Ç–µ—Ä —á–µ—Ä–µ–∑ Serial/USB/Network

5. **–ü—Ä–∏–Ω—Ç–µ—Ä –ø–µ—á–∞—Ç–∞–µ—Ç —ç—Ç–∏–∫–µ—Ç–∫—É**
   ```
   [–û—Ç—Å—Ç—É–ø —Å–≤–µ—Ä—Ö—É]
   –Ø–ß–ï–ô–ö–ê
   
   A1-1
   [–∫—Ä—É–ø–Ω—ã–º —à—Ä–∏—Ñ—Ç–æ–º]
   
   [QR-–∫–æ–¥: A1-1]
   
   [–û—Ç—Å—Ç—É–ø —Å–Ω–∏–∑—É]
   [–û—Ç—Ä–µ–∑–∞–Ω–∏–µ]
   ```

6. **–î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è**
   - –ò—Å—Ç–æ—Ä–∏—è: –∑–∞–ø–∏—Å—å –≤ `print_history.json`
   - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: —É–≤–µ–ª–∏—á–µ–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–æ–≤
   - –õ–æ–≥: –∑–∞–ø–∏—Å—å –≤ `logs/print_server_*.log`

7. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é**
   - –í –±—Ä–∞—É–∑–µ—Ä–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ: "‚úì –ü–µ—á–∞—Ç—å: A1-1"
   - –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –∑–≤—É–∫–æ–≤–æ–π —Å–∏–≥–Ω–∞–ª

8. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞**
   - Popup —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—á–µ—Ç—á–∏–∫–∏ (–∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥)
   - –ò—Å—Ç–æ—Ä–∏—è –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

---

## üîß –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –î–ï–¢–ê–õ–ò

### –ü—Ä–æ—Ç–æ–∫–æ–ª—ã –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

- **Backend:** Flask (Python) - REST API —Å–µ—Ä–≤–µ—Ä
- **Frontend:** Vanilla JavaScript (Chrome Extension API)
- **–ü–µ—á–∞—Ç—å:** python-escpos - –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å ESC/POS –ø—Ä–∏–Ω—Ç–µ—Ä–∞–º–∏
- **–°–≤—è–∑—å:** HTTP/JSON –º–µ–∂–¥—É —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º –∏ —Å–µ—Ä–≤–µ—Ä–æ–º
- **–•—Ä–∞–Ω–µ–Ω–∏–µ:** JSON —Ñ–∞–π–ª—ã (–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è, –∏—Å—Ç–æ—Ä–∏—è)

### –ü–æ—Ç–æ–∫–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

1. **–ì–ª–∞–≤–Ω—ã–π –ø–æ—Ç–æ–∫ —Å–µ—Ä–≤–µ—Ä–∞:** Flask –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç HTTP –∑–∞–ø—Ä–æ—Å—ã
2. **–ü–æ—Ç–æ–∫ print_worker:** –§–æ–Ω–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—á–µ—Ä–µ–¥–∏ –ø–µ—á–∞—Ç–∏
3. **–ü–æ—Ç–æ–∫ –±—Ä–∞—É–∑–µ—Ä–∞:** Content Script —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
4. **Service Worker:** Background script –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è (–º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞)

### –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è

- **`print_lock` (threading.Lock):** –ó–∞—â–∏—â–∞–µ—Ç –æ—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π –ø–µ—á–∞—Ç–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —è—á–µ–µ–∫
- **`print_queue` (queue.Queue):** –ü–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ—á–µ—Ä–µ–¥—å –¥–ª—è –∑–∞–¥–∞—á –ø–µ—á–∞—Ç–∏
- **`Set` –≤ content.js:** –•—Ä–∞–Ω–∏—Ç —É–∂–µ –Ω–∞–ø–µ—á–∞—Ç–∞–Ω–Ω—ã–µ —è—á–µ–π–∫–∏ (–∏–∑–±–µ–∂–∞–Ω–∏–µ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤)

---

## ‚ö†Ô∏è –û–ë–†–ê–ë–û–¢–ö–ê –û–®–ò–ë–û–ö

### –¢–∏–ø–∏—á–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –æ—à–∏–±–æ–∫

1. **–ü—Ä–∏–Ω—Ç–µ—Ä –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω:**
   - –ó–∞–¥–∞—á–∞ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ –æ—á–µ—Ä–µ–¥—å
   - `print_worker` –±—É–¥–µ—Ç –ø–æ–≤—Ç–æ—Ä—è—Ç—å –ø–æ–ø—ã—Ç–∫–∏ –¥–æ 3 —Ä–∞–∑
   - –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –∑–∞–ø–∏—Å—å –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ –∏—Å—Ç–æ—Ä–∏—é —Å –æ—à–∏–±–∫–æ–π

2. **–°–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—â–µ–Ω:**
   - –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "–°–µ—Ä–≤–µ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω"
   - –ó–∞–ø—Ä–æ—Å—ã –Ω–∞ –ø–µ—á–∞—Ç—å –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è
   - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é: "–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è"

3. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—Ç –ø—Ä–∏–Ω—Ç–µ—Ä–∞:**
   - –ü—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –æ—à–∏–±–∫–∞
   - –í –ª–æ–≥–∞—Ö –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è: "–û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏–Ω—Ç–µ—Ä–∞"
   - –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å "–ù–µ –ø–æ–¥–∫–ª—é—á–µ–Ω"

4. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—á–∞—Ç–∏:**
   - Content Script –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `printedCells` Set
   - –ï—Å–ª–∏ —è—á–µ–π–∫–∞ —É–∂–µ –±—ã–ª–∞, –ø–æ–≤—Ç–æ—Ä–Ω–∞—è –ø–µ—á–∞—Ç—å –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç

---

## üìä –ú–ï–¢–†–ò–ö–ò –ò –ú–û–ù–ò–¢–û–†–ò–ù–ì

### –î–æ—Å—Ç—É–ø–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏

- –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫ –ø–µ—á–∞—Ç–∏
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Å–ø–µ—à–Ω—ã—Ö –ø–µ—á–∞—Ç–µ–π
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—à–∏–±–æ–∫
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –¥–Ω—è–º
- –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–π –ø–µ—á–∞—Ç–∏
- –†–∞–∑–º–µ—Ä –æ—á–µ—Ä–µ–¥–∏ –ø–µ—á–∞—Ç–∏

### API endpoints –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

- `GET /status` - –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞ –∏ –ø—Ä–∏–Ω—Ç–µ—Ä–∞
- `GET /statistics` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- `GET /history` - –ò—Å—Ç–æ—Ä–∏—è –ø–µ—á–∞—Ç–∏ (JSON)
- `GET /history/page` - –ò—Å—Ç–æ—Ä–∏—è –ø–µ—á–∞—Ç–∏ (HTML)
- `GET /ports` - –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö COM-–ø–æ—Ä—Ç–æ–≤

---

## üéØ –†–ï–ó–Æ–ú–ï

**–ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª –æ—Ç –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è —è—á–µ–π–∫–∏ –¥–æ –ø–µ—á–∞—Ç–∏ –∑–∞–Ω–∏–º–∞–µ—Ç:**
- –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ: < 1 —Å–µ–∫—É–Ω–¥–∞ (MutationObserver —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω–æ)
- –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä: < 100ms (–ª–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å)
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏ –ø–µ—á–∞—Ç—å: 1-3 —Å–µ–∫—É–Ω–¥—ã (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –ø—Ä–∏–Ω—Ç–µ—Ä–∞)
- **–ò—Ç–æ–≥–æ: ~2-4 —Å–µ–∫—É–Ω–¥—ã** –æ—Ç –ø–æ—è–≤–ª–µ–Ω–∏—è —è—á–µ–π–∫–∏ –¥–æ –Ω–∞–ø–µ—á–∞—Ç–∞–Ω–Ω–æ–π —ç—Ç–∏–∫–µ—Ç–∫–∏

**–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–≤—Ç–æ—Ä—ã –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö (–¥–æ 3 —Ä–∞–∑)
- –û—á–µ—Ä–µ–¥—å –ø–µ—á–∞—Ç–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∑–∞–¥–∞—á–∏ –ø—Ä–∏ –≤—Ä–µ–º–µ–Ω–Ω–æ–π –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –ø—Ä–∏–Ω—Ç–µ—Ä–∞
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
- –ò—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö –ø–æ–ø—ã—Ç–æ–∫ –ø–µ—á–∞—Ç–∏

